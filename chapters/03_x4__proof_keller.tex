\documentclass[../thesis.tex]{subfiles}
% Separate preamble for this subfile. This preamble is loaded last, so one can override various functions before \begin{document}

% Better comment extension for Vscode colors these comments differently
% Normal comment color
% * Important information
% ! ALERT
% ? Question
% TODO stuff to do
% // This is strikethrough


\begin{document}
Before we begin the proof, we restate Keller's \namecref{thrm:keller_tiling} here for convenience. 
\begin{reptheorem}{thrm:keller_tiling}
    If $\Lambda$ is a tiling set for the unit cube, then for any two $\lambda, \lambda' \in \Lambda$ with $\lambda\neq\lambda'$, there exist a $j\in \braq{1,\dots,d}$ so that $\lambda_j-\lambda_j' \in \intnozero$.
\end{reptheorem}

The proof is based on an English version by \cite{iosevichSpectralTilingProperties1998}.

\begin{proof}[Proof of \cref{thrm:keller_tiling}]
    Let $\Lambda$ be a tiling set for $I^d$, let $\lambda = (\lambda_1,\dots,\lambda_d)$ and $\lambda' = (\lambda_1',\dots,\lambda_d')$ be two elements from $\Lambda$, and let $j\in\braq{1,\dots, d}$ index the coordinates. In short, the proof will be an induction on the number of $j$'s with distance $\bral{\lambda_j-\lambda_j'}\geq 1$, and for which we must show that at least one of these $j$'s satisfy $\bral{\lambda_{j}-\lambda_{j}'} \in \N$ for $\lambda \neq \lambda'$ in each of the induction steps. The latter equation is simply an equivalent reformulation of the condition $\lambda_{j}-\lambda_{j}' \in \intnozero$.
    % elements in $\Lambda$ where the coordinates are indexed by $j\in\braq{1,\dots, d}$ 

    %* BASE CASE
    In the base case we assume that $\bral{\lambda_j-\lambda_j' }< 1 $ for all but \emph{one} coordinate $j\in \braq{1,\dots,d}$, and let $j_0$ denote the distinct $j$-coordinate for which we have $\bral{\lambda_{j_0}-\lambda_{j_0}'} \geq 1$. Now, take $x=\brac{x_1,\dots,x_d}\in \R^d$, and fix all $x_j$'s for which $j\neq j_0$ to create a very specific line
    \begin{equation*}
        l_{j_0} = \braqMed{\bracMed{x_1,\dots,x_d} : x_{j_0} \in \R },
    \end{equation*}
    which additionally must intersect the two unit cubes $I+\lambda$ and $I+\lambda'$. If we now consider \emph{all} unit cubes $I+\lambda$ for $\lambda \in \Lambda$ that intersect the line $l_{j_0}$, it is clear that the distance between all of the cubes along this line is either $0$ if $\lambda=\lambda'$ or a natural number if $\lambda \neq \lambda'$, since $\Lambda$ is a tiling set and $\mes{I}=1$. In other words, for $\lambda \neq \lambda'$ we have
    \begin{equation*}
        \bralMed{\lambda_{j_0}-\lambda_{j_0}'} \in \N.
    \end{equation*}

    %* INDUCTIVE HYPOTHESIS FOLLOWED BY THE INDUCTIVE STEP
    Now for the induction hypothesis. Let $k\in \N$ denote some number of values of $j\in \braq{1,\dots, d}$, and note that the number of remaining values is given by $d-k$. In the hypothesis, we assume that $\bral{\lambda_{j}-\lambda_{j}'} < 1$ for all but $d-k$ coordinates of $j\in\braq{1,\dots, d}$ imply that $\bral{\lambda_{j_0}-\lambda_{j_0}'} \in \N$ for at least one $j_0$ of the $d-k$ values with $\bral{\lambda_{j}-\lambda_{j}'} \geq 1$. That is,
    \begin{align*}
        \bralMed{\lambda_{j}-\lambda_{j}'} < 1& \quad \text{ for $k$ values of } j , \\
        \bralMed{\lambda_{j}-\lambda_{j}'} \geq 1& \quad \text{ for $d-k$ values of } j .
        \intertext{For the inductive step, we consider}
        \bralMed{\lambda_{j}-\lambda_{j}'} < 1& \quad \text{ for $k-1$ values of } j , \\
        \bralMed{\lambda_{j}-\lambda_{j}'} \geq 1& \quad \text{ for $d-k+1$ values of } j .
    \end{align*}
    As we can interchange the coordinate axes, we can always rearrange the order of the values of the index set into
    \begin{equation*}
        \braq{\underbrace{1,2,3,4,5,\dots,}_{d-k+1 \text{ values of $j$}}\underbrace{\dots,d-2,d-1,d}_{k-1 \text{ values of $j$}}} \Leftrightarrow \braq{\underbrace{1,\dots,d-k+1,}_{d-k+1 \text{ values of $j$}}\underbrace{d-k+2,\dots,d}_{k-1 \text{ values of $j$}}},
    \end{equation*} 
    so that we can assume
    \begin{align*}
        \bralMed{\lambda_{j}-\lambda_{j}'} \geq 1& \quad \text{ for } j=1,\dots,d-k+1 \\
        \bralMed{\lambda_{j}-\lambda_{j}'} < 1& \quad \text{ for } j= d-k+2,\dots,d.
    \end{align*}
    Now to show that at least one of $\bral{\lambda_{j}-\lambda_{j}'} \geq 1$ for the values $j=1,\dots,d-k+1$ is an integer. Observe that if $\lambda_{1}-\lambda_{1}'\in\Z$, then there is nothing to show as $\lambda_1-\lambda_1 =0$ if $\lambda=\lambda'$, and $\lambda_1-\lambda_1' \in \N$ if $\lambda\neq\lambda'$ (using the same line argument as base case?). Therefore, assume $\lambda_{1}-\lambda_{1}' \notin \Z$. Furthermore, for some $\alpha\in\R^d$ let $\alpha = \brac{\lambda_{1}-\lambda_{1}',0,\dots,0}$, and define the function $s(\tilde{\lambda})$ where $\tilde{\lambda}\in \Lambda$ as
    \begin{equation}\label{eq:s_function}
        s(\tilde{\lambda}) = 
        \begin{cases}
            \tilde{\lambda} - \alpha & \text{ if } \tilde{\lambda}_1-\lambda_1 \in \Z\\
            \tilde{\lambda} & \text{ if } \tilde{\lambda}_1-\lambda_1 \notin \Z\\
        \end{cases}
    \end{equation}
    Observe that $s(\lambda')=\lambda'$ using that  $\lambda \neq \lambda'$ and $\lambda_{1}-\lambda_{1}' \notin \Z$. Additionally, $s(\lambda)=\lambda-\alpha$ since clearly $\lambda_{1}-\lambda_{1} = 0$. Using \labelcref{eq:s_function}, we create a new set 
    \begin{equation*}
        \mathbf{S} = \braqMed{s(\tilde{\lambda}) :\tilde{\lambda} \in  \Lambda },
    \end{equation*}
    which we claim is also a tiling set for the unit cube. Before proving the claim, assume for now that $\mathbf{S}$ is a tiling set for $I^d$, and observe for $\lambda\neq \lambda'$ first that 
    \begin{equation*}
        \bralMed{ s(\lambda)_1 - s(\lambda')_1} = \bralMed{\lambda_1 - \bracMed{\lambda_1-\lambda_1'} - \lambda_1'} = 0
    \end{equation*}
    and then that
    \begin{equation*}
        \bralMed{ s(\lambda)_j - s(\lambda')_j} < 1 \quad \text{ for } j= d-k+2,\dots,d.
    \end{equation*}
    which, from the inductive hypothesis, leaves one of the numbers 
    \begin{equation*}
        \bralMed{\lambda_j - \lambda_j'} = \bralMed{s(\lambda)_j - s(\lambda')_j} \in \N \quad \text{ for } j = 2,\dots, d-k+1.
    \end{equation*}


    \SigridChange{Max tiling}\\
    To show that $\mathbf{S}$ is a tiling set, we must show that
    \begin{equation*}
        \sum_{\gamma \in \Lambda} \indicator{I^d}{x-s(\gamma)} = 1, \quad a.e. \text{\space\space} x \in \R^d.
    \end{equation*}
    Since $\Lambda$ is a tiling set, we already know that
    \begin{equation*}
        \sum_{\gamma \in \Lambda} \indicator{I^d}{x-\gamma} = 1, \quad a.e. \text{\space\space} x \in \R^d.
    \end{equation*}
    For some $\gamma\in \Lambda$ we know that either $\gamma_1-\lambda_1 \in \Z$ or $\gamma_1-\lambda_1 \not\in \Z$. In the latter case, observe that since
    $\indicator{I^d}{x-\gamma} = 1$ then this implies that $\indicator{I^d}{x-s(\gamma)} = 1$ since $s(\gamma) = \gamma$. In the first case, the argument is not as straightforward. Observe that we have
    \begin{align*}
        \indicator{I^d}{x-s(\gamma)} &= \indicator{I^d}{x- (\gamma-\alpha)}\\
        &= \indicator{I^d}{x- (\gamma_1-\alpha_1,\gamma_2,\dots,\gamma_d)}\\
        &= \indicator{I^d}{x_1-\gamma_1+\alpha_1,x_2- \gamma_2,\dots,x_d-\gamma_d}\\
    \end{align*}


    \SigridChange{Max tiling take 2}\\
    To show that $\mathbf{S}$ is a tiling set, we must show that
    \begin{equation*}
        \sum_{\gamma \in \mathbf{S}} \indicator{I^d}{x-\gamma} = 1, \quad a.e. \text{\space\space} x \in \R^d.
    \end{equation*}
    Since $\Lambda$ is a tiling set, we already know that
    \begin{equation*}
        \sum_{\gamma \in \Lambda} \indicator{I^d}{x-\gamma} = 1, \quad a.e. \text{\space\space} x \in \R^d.
    \end{equation*}
    Consider two subsets $A, B \subset S$ defined such that 
    \begin{align*}
        S\setminus A =& \braqMed{s(\gamma) = \gamma : \gamma \in \Lambda}\\
        S\setminus B =& \braqMed{s(\gamma) = \gamma - \alpha : \gamma \in \Lambda}
    \end{align*}
    \begin{align*}
        \sum_{\gamma \in \mathbf{S}} \indicator{I^d}{x-\gamma} = \sum_{\gamma \in S\setminus A} \indicator{I^d}{x-\gamma} +\sum_{\gamma \in S\setminus B} \indicator{I^d}{x-\gamma}
    \end{align*}
    Since $s(\gamma) = \gamma$ for all elements in $S\setminus A$, the first sum equals $1$ almost everywhere. For the second sum, we have
    \begin{align*}
        \sum_{\gamma \in S\setminus B} \indicator{I^d}{x-\gamma} = \sum_{\gamma \in \Lambda} \indicator{I^d}{x-\gamma + \alpha}
    \end{align*}

    \SigridComment{Must now argue that all elements in this set still equal one almost everywhere. }\\
    maybe some argument on the fact that 
    \begin{align*}
        \sum_{\gamma \in \Lambda} \indicator{I^d}{(x+\alpha) - \gamma} = 1 a.e 
    \end{align*}
    i.e considering all shifted $x$'s, and then defining $y=x+\alpha$, to yield $\sum_{\gamma \in \Lambda} \indicator{I^d}{y - \gamma} = 1$ a.e. $y\in \R^d$ or some $y\in \R^d\setminus \braqMed{something}$. 
    
    Or maybe some argument that lets us consider points $x-\alpha$, which would yield
    \begin{align*}
        \sum_{\gamma \in \Lambda} \indicator{I^d}{(x-\alpha) - \gamma + \alpha} = \sum_{\gamma \in \Lambda} \indicator{I^d}{x - \gamma}
    \end{align*}
    which we know is equal to $1$ almost everywhere since $\Lambda$ is a tiling set. 


    maybe this can come in handy
    \begin{equation*}
        x\in I^d + \gamma - \alpha \Longleftrightarrow x-\alpha \in I^d + \gamma,  \quad \forall x\in something
    \end{equation*}

    \SigridChange{original proof}\\

    %* non-overlapping
    To show that $\mathbf{S}$ is a tiling set, we first show that it is non-overlapping and then covers the whole space. For $\mathbf{S}$ to be non-overlapping, all intersections of distinct elements must have measure zero. Hence, consider two distinct elements $\gamma,\gamma'\in\Lambda$ and assume that there is a point $z$ in the intersection $\brac{I^d+s(\gamma)}\cap \brac{I^d+s(\gamma')}$. This assumption implies that 
    \begin{equation*}
        z-s(\gamma)\in I^d \quad \text{ and } \quad z-s(\gamma')\in I^d
    \end{equation*}
    To be specific, we have \SigridComment{we have unit cube [0,1], they used [0,1)}
    \begin{equation*}
        0 \leq z_j - \gamma_j \leq 1 \quad \text{ and } \quad 0 \leq z_j - \gamma_j' \leq 1 \quad \text{ for } j= 2, \dots, d,
    \end{equation*}
    which implies that $\bral{\gamma_j-\gamma_j'} <1$ for $j= 2, \dots, d$. We now have a case very similar to the base case first shown. Applying similar arguments, that is, consider points $x\in\R^d$ where we fix all $x_j$'s for which $j\neq 1$ we construct the line 
    \begin{equation*}
        l_{1} = \braqMed{\bracMed{x_1,\dots,x_d} : x_{1} \in \R },
    \end{equation*}
    that intersect both cubes $I^d + \gamma$ and $I^d + \gamma'$ as well as the point $z$ in the intersection. Applying the final arguments as in the base case, we must have $\bral{\gamma_1-\gamma_1'} \in \N$. The only options we have when considering $s(\gamma)$ and $s(\gamma')$ are either
    \begin{align*}
        I: \gamma_1-\lambda_1 \in \Z \quad \text{ and } \quad \gamma_1'-\lambda_1 \in \Z.\\
        II: \gamma_1-\lambda_1 \not\in \Z \quad \text{ and } \quad \gamma_1'-\lambda_1 \not\in \Z.
    \end{align*}
    The first of which yields
    \begin{align*}
        \bracMed{I^d+s(\gamma)}\cap \bracMed{{I^d+s(\gamma')}} &= \bracMed{\brac{I^d+\gamma-\alpha}\cap \brac{I^d+\gamma'-\alpha}},\\
        &= \bracMed{\brac{I^d+\gamma}\cap \brac{I^d+\gamma'}} -\alpha,\\
        &= \emptyset. 
        \intertext{And the second}
        \bracMed{I^d+s(\gamma)}\cap \bracMed{{I^d+s(\gamma')}} &= \bracMed{\brac{I^d+\gamma}\cap \brac{I^d+\gamma'}},\\
        &= \emptyset.
    \end{align*}
    In both cases, we have used the non-overlapping property of $\Lambda$ in the final step. In both cases, we now have a contradiction to our initial assumption that the intersection of $\bracMed{I^d+s(\gamma)}\cap \bracMed{{I^d+s(\gamma')}}$ was non-empty. 

    %* Cover the whole space
    Now, for $\mathbf{S}$ to cover the whole space we must have
    \begin{equation*}
        \R^d \subseteq \bigcup_{\gamma\in\Lambda} \bracMed{I^d + s(\gamma)}.
    \end{equation*}
    Let $z\in \R^d$ denote an arbitrary point. Since $\Lambda$ covers $\R^d$, we know that
    \begin{equation*}
        x\in \bigcup_{\gamma\in\Lambda} \brac{I^d + \gamma}.
    \end{equation*}
    For $s(\gamma)$ we have two options depending on whether $\gamma_1-\lambda_1 \in\Z$ or $\gamma_1-\lambda_1 \not\in\Z$. In the latter case, observe that since $z\in I^d+\gamma$ then this implies that $z\in I^d+s(\gamma)$ since $s(\gamma) = \gamma$. In the first case, the argument is not as straightforward. As we have $\gamma-\lambda_1\in \Z$, we know that $z\in(I^d+\gamma-\alpha)$, which means that if we consider the point $z+\alpha$, we know that this must be in the cube $I^d+\gamma'$ for some $\gamma'\in \Lambda$. Naturally, the cubes $I^d+\gamma$ and $I^d+\gamma'$ are distinct, and our goal is to show that there must be a non-zero integer distance between them. By using $z\in I^d+\gamma$ and $z+\alpha \in I^d+\gamma'$, observe that for all $j=1,\dots, d$ we have
    \begin{equation*}
        0 \leq z_j - \gamma_j \leq 1 \quad \text{ and } \quad 0 \leq z_j + \alpha_j - \gamma_j' \leq 1.
    \end{equation*}
    Since we know $\alpha_j = 0$ for all $j=2,\dots,d$ this implies that $\bral{\gamma_j-\gamma_j'} <1$ for all $j=2,\dots,d$. Again, we have a case similar to the base case, and we can use the same arguments to show $\bral{\gamma_j-\gamma_j'} \in \N$. As there is a positive integer distance between these cubes and we know that $\gamma_1-\lambda_1 \in\Z$, then we also know that $\gamma_1'-\lambda_1 \in\Z$. Since $s(\gamma') = \gamma-\alpha$ and $0\leq z_1+\alpha_1 - \gamma_1' \leq 1$ we have that $z\in I+s(\gamma')$. Since $\alpha\in\R^d$ was arbitrary, we have shown that $\mathbf{S}$ cover $\R^d$, and hence is a tiling set for $I^d$.
\end{proof}

\SigridComment{On second thought, it might be correct to consider [0,1) in this case, as it leads to some complications when doing the $\leq 1$ stuff, especially when one shows non-overlapping and covering}
\end{document}